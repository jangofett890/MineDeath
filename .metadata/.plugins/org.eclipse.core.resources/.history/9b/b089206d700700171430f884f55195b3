package minedeath.world;

import org.bukkit.block.Sign;
import org.bukkit.event.EventHandler;
import org.bukkit.event.Listener;
import org.bukkit.event.block.Action;
import org.bukkit.event.block.SignChangeEvent;
import org.bukkit.event.player.PlayerInteractEvent;

public class WorldListeners extends WorldMain implements Listener{
	@EventHandler
	public void onIntereact(PlayerInteractEvent e){
		block = e.getClickedBlock();
		if(e.getAction() == Action.RIGHT_CLICK_BLOCK){
			if(block.getState() instanceof Sign){
				sign = (Sign) e.getClickedBlock().getState();
				readSign(sign);
			}
		}
	}
	@EventHandler
	public void signTextChange(SignChangeEvent e){
		sign = (Sign) e.getBlock().getState();
		player = e.getPlayer();
		int locX = (int) Math.round(player.getLocation().getX());
		int locY = (int) Math.round(player.getLocation().getY());
		int locZ = (int) Math.round(player.getLocation().getZ());
		String xyz = Integer.toString(locX) + ", " + Integer.toString(locY) + ", " + Integer.toString(locZ);
		print(xyz);
		if(sign.getLine(0).equalsIgnoreCase("test")){
			setLine(sign, 0, "GameMap");
			update(sign, true);
		}
	}
	private void setLine(Sign sign, int line, String text){
		sign.setLine(line, text);
		
	}
	private void update(Sign sign, boolean bool){
		sign.update(bool);
	}
}
